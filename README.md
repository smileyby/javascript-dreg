JavaScript 糟粕
===============

## 1.全局变量

JavaScript所有的糟粕特性中最为糟糕的就是它对全局变量的依赖性。全局变量就是在所有的作用域中都可见的变量。全局变量在很小的程序中可能会带来方便，但随着程序变得越来越大，他们很快变得难以处理。因为一个全局变量可以被程序的任何部分在任意时间改变，他们会使得程序的行为被极大的复杂化。程序中使用全局变量降低可程序的可靠性。

全局变量是的在同一个程序中运行独立的子程序更难。如果某些全局变量的名称碰巧和子程序中的变量名相同，那么他们将会互相冲突并可能导致程序无法运行，而且通常难以调试。

许多变成语言都是全局变量。例如，java中的public static成员元素就是全局变量。JavaScript的问题不仅在于它允许全局变量，而且在于它要求使用它们。JavaScript没有连接器（linker）。所有的编译单元都载入一个公用的全局对象中。

共有3种方式定义全局变量。第一种是脱离任何函数安排一个var语句：

```js

var foo = value;

```

第二种是直接添加一个属性的全局对象上。全局对象是所有全局变量的容器。在Web浏览器里，全局对象名window：

```js

window.foo = value;

```

第三种是直接使用未经声明的变量。这被称为隐式的全局变量：

```js

foo = value;

```

这本来是为了方便初学者而有意让变量在使用前无需声明。不幸的是，忘记声明变量称为一个非常普遍的错误。JavaScript的策略是让那些忘记预先声明的变量成为全局变量，这导致查找bug非常困难。

## 2.作用域

JavaScript的语法来源于C。在所有其他类似C语言风格的语言里，一个代码块（扩在一堆花括号中的一组语句）会创造一个作用域。代码块中声明的变量在其外部是不可见的。JavaScript采用了这样的块语法，但没有提供会计作用域：代码块中声明的变量在包含此代码块的函数的任何位置都是可见的，这样有其他语言编码经验的程序员大为意外。

在大多数语言中，一般来说声明变量的最好的地方是在第一次用到它的地方。但这种做法在JavaScript采用了这样的块语法，但没有提供块级作用域：代码块中声明的变量在包含此代码块的函数的任何位置都可见。折让有其他语言编码经验的程序员大为意外。

在大多数语言中，一般说声明变量的最好的地方是在第一次用到它的地方。但这种做法在JavaScript里反而是一个坏习惯，因为它没有块级作用域。更好的方式是在每个函数的凯有部分声明所有变量。

